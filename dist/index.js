!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).iconColorChangeUtil={})}(this,(function(e){"use strict";var t=function(e){return new Promise((function(t,n){var i,o,a=e.iconUrl,l=e.newColor,r=e.width,d=e.height,h=e.type,u=e.callback;u||"function"!=typeof h||(u=h,h="image-data"),f();var c=document.createElement("img");function f(){o||i||(i=document.createElement("canvas"),o=i.getContext("2d"))}c.addEventListener("load",(function(){var e;if(i.width=c.width,i.height=c.height,function(e,t){f(),null==o||o.clearRect(0,0,i.width,i.height),null==o||o.drawImage(c,0,0,i.width,i.height),function(){if(!o)return;var e,t,n,a=o.getImageData(0,0,i.width,i.height),l=a.data;for(e=0,t=null==l?void 0:l.length;e<t;e+=4)0!==l[e+3]&&(n=(l[e]+l[e+1]+l[e+2])/3>>>0,l[e]=l[e+1]=l[e+2]=n);o.putImageData(a,0,0)}(),function(e,t){if(!o)return;o.globalCompositeOperation="source-atop",o.globalAlpha=t,o.fillStyle=e,o.fillRect(0,0,i.width,i.height),o.globalCompositeOperation="source-over",o.globalAlpha=1}(e,t)}(l,1),"data-png"===h){var n=i.toDataURL("image/png",1);null==u||u(n),e=n}else{var a=null==o?void 0:o.getImageData(0,0,i.width,i.height);null==u||u(a),e=a}t(e),c.remove()})),c.addEventListener("error",(function(){n("error")})),r&&(c.width=r),d&&(c.height=d),c.src=a}))};e.default=t,e.iconColorChangeUtil=t,Object.defineProperty(e,"__esModule",{value:!0})}));
