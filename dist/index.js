!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).iconColorChangeUtil={})}(this,function(e){"use strict";function t(e){var h,d,t=(a=e||{}).iconUrl,i=a.newColor,o=a.type,n=a.callback,e=a.width,a=a.height;n||"function"!=typeof o||(n=o,o="image-data"),g();var l=document.createElement("img");function g(){d||h||(h=document.createElement("canvas"),d=h.getContext("2d"))}l.addEventListener("load",function(){{var e;h.width=l.width,h.height=l.height,function(e,t){g(),null==d||d.clearRect(0,0,h.width,h.height),null==d||d.drawImage(l,0,0,h.width,h.height),function(){if(d){var e,t,i,o,n,a=d.getImageData(0,0,h.width,h.height),l=a.data;for(e=0,t=null==l?void 0:l.length;e<t;e+=4)0!==l[e+3]&&(i=l[e],o=l[e+1],n=l[e+2],n=(i+o+n)/3>>>0,l[e]=l[e+1]=l[e+2]=n);d.putImageData(a,0,0)}}(),function(e,t){d&&(d.globalCompositeOperation="source-atop",d.globalAlpha=t,d.fillStyle=e,d.fillRect(0,0,h.width,h.height),d.globalCompositeOperation="source-over",d.globalAlpha=1)}(e,t)}(i,1),"data-png"===o?(e=h.toDataURL("image/png",1),null!=n&&n(e)):(e=null==d?void 0:d.getImageData(0,0,h.width,h.height),null!=n&&n(e))}l.remove()}),e&&(l.width=e),a&&(l.height=a),l.src=t}e.default=t,e.iconColorChangeUtil=t,Object.defineProperty(e,"__esModule",{value:!0})});
